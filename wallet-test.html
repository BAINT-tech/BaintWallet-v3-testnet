<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>BAINT Wallet Test</title>
  <script src="https://cdn.jsdelivr.net/npm/ethers@6.7.0/dist/ethers.umd.min.js"></script>
</head>
<body style="font-family: Arial; text-align: center; margin-top: 80px;">

  <h2>ðŸª™ BAINT Wallet - Test Connection</h2>
  <p>Connect to Sepolia or BSC Testnet</p>

  <button id="connectSepolia">Connect Sepolia</button>
  <button id="connectBSC">Connect BSC Testnet</button>
  <p id="status" style="margin-top: 20px; color: green;"></p>

  <script>
    const { ethers } = window.ethers;

    const networks = {
      sepolia: {
        chainId: '0xaa36a7',
        chainName: 'Sepolia Test Network',
        nativeCurrency: { name: 'Ethereum', symbol: 'ETH', decimals: 18 },
        rpcUrls: ['https://rpc.sepolia.org'],
        blockExplorerUrls: ['https://sepolia.etherscan.io']
      },
      bscTestnet: {
        chainId: '0x61',
        chainName: 'Binance Smart Chain Testnet',
        nativeCurrency: { name: 'Binance Coin', symbol: 'BNB', decimals: 18 },
        rpcUrls: ['https://data-seed-prebsc-1-s1.binance.org:8545'],
        blockExplorerUrls: ['https://testnet.bscscan.com']
      }
    };

    async function connectWalletAndSwitch(chain) {
      const status = document.getElementById('status');
      try {
        if (!window.ethereum) {
          status.textContent = "MetaMask not found!";
          return;
        }

        const provider = new ethers.BrowserProvider(window.ethereum);
        await provider.send("eth_requestAccounts", []);

        try {
          await window.ethereum.request({
            method: "wallet_switchEthereumChain",
            params: [{ chainId: networks[chain].chainId }],
          });
          status.textContent = `âœ… Switched to ${networks[chain].chainName}`;
        } catch (switchError) {
          if (switchError.code === 4902) {
            await window.ethereum.request({
              method: "wallet_addEthereumChain",
              params: [networks[chain]],
            });
            status.textContent = `âœ… Added & switched to ${networks[chain].chainName}`;
          } else {
            throw switchError;
          }
        }

        const signer = await provider.getSigner();
        const address = await signer.getAddress();
        status.textContent = `âœ… Connected: ${address.slice(0, 6)}...${address.slice(-4)}`;

      } catch (error) {
        console.error("Error:", error);
        status.textContent = "âŒ Connection failed. Check console for details.";
      }
    }

    document.getElementById("connectSepolia").onclick = () => connectWalletAndSwitch("sepolia");
    document.getElementById("connectBSC").onclick = () => connectWalletAndSwitch("bscTestnet");
  </script>

</body>
</html>
